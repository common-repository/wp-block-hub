jQuery(document).ready(function(e){var a,s=(a=0,function(t,i){clearTimeout(a),a=setTimeout(t,i)});e(document).on("keyup","#block-keyword",function(){_this=this,keyword=e(this).val(),t=window.location.href;var t=new URL(t);s(function(){e(_this).parent().children(".loading").addClass("button updating-message"),t.searchParams.append("keyword",keyword),t.searchParams.delete("paged"),window.location.href=t.href},1e3)}),e(document).on("click",".block-save",function(){_this=this,post_id=e(this).attr("data-id"),e(_this).addClass("updating-message"),e.ajax({type:"POST",context:_this,url:wpblockhub_ajax.wpblockhub_ajaxurl,data:{action:"wpblockhub_ajax_fetch_block_hub_by_id",wpblockhub_ajax_nonce:wpblockhub_ajax.ajax_nonce,post_id:post_id},success:function(t){var i=JSON.parse(t);post_data=i.post_data,download_count=i.download_count,e(this).addClass("saved"),e(this).text("Saved"),e(_this).removeClass("updating-message")}})}),e(document).on("mouseover",".block-thumb",function(){if(imgHeight=e(this).children("img").height(),wrapHeight=e(this).height(),imgHeight>wrapHeight){var t=wrapHeight-imgHeight;e(this).children("img").animate({marginTop:t+"px"},2e3)}}),e(document).on("mouseout",".block-thumb",function(){if(imgHeight=e(this).children("img").height(),wrapHeight=e(this).height(),imgHeight>wrapHeight){animationOffset=0;e(this).children("img").animate({marginTop:animationOffset+"px"},1e3)}}),e(document).on("click",".block-publish",function(){post_id=e(this).attr("data-post-id"),data_update=e(this).attr("data-update"),e(this).addClass("updating-message"),e.ajax({type:"POST",context:this,url:wpblockhub_ajax.wpblockhub_ajaxurl,data:{action:"wpblockhub_ajax_submit_to_wpblockhub",wpblockhub_ajax_nonce:wpblockhub_ajax.ajax_nonce,post_id:post_id,data_update:data_update},success:function(t){var i=JSON.parse(t);block_hub_exist=i.block_hub_exist,message=i.message,"yes"==block_hub_exist&&(e(this).attr("data-update","yes"),e(this).text("Update")),e(this).parent().children(".description").html(message),e(this).removeClass("updating-message")}})}),e(document).on("click",".wpblockhub-import-container #wpblockhub-import-btn",function(){for(cate in e(".item-list-wrap").hasClass("active")?e(".item-list-wrap").removeClass("active"):e(".item-list-wrap").addClass("active"),wpblockhub_posts=wpblockhub_ajax.wpblockhub_data.data.posts,categories=wpblockhub_ajax.wpblockhub_data.data.categories,html="",html+='<select class="categories">',html+='<option value="">Select category',html+="</option>",categories)html+='<option value="'+cate+'">'+categories[cate].name,html+="</option>";for(item in html+="</select>",html+='<input type="search" value="" placeholder="Start type here..." class="keyword">',html+="<ul>",wpblockhub_posts)if(itemData=wpblockhub_posts[item],plugins_required=wpblockhub_posts[item].plugins_required,post_id=itemData.post_id,thumb=itemData.thumb,title=itemData.title,thumb){if(html+='<li class="item">',html+='<span class="item-import button" postid="'+post_id+'">Import</span>',html+='<img width="300px" src="'+thumb+'" />',html+='<div class="plugins-required">',"string"==typeof plugins_required)html+='<div class="">No 3rd party plugins required.</div>';else for(pluginData in html+='<div class="">Plugins required:</div>',plugins_required)plugin_zip_url=plugins_required[pluginData].plugin_zip_url,plugin_name=plugins_required[pluginData].name,html+='<div class="plugins-item">',html+='<a href="'+plugin_zip_url+'">'+plugin_name+"</a>",html+="</div>";html+="</div>",html+="<hr>",html+="</li>"}html+="</ul>",html+='<div paged="2" class="load-more button">Load more</div>',e(".item-list-wrap").html(html)}),e(document).on("change",".item-list-wrap .categories",function(){var t=e(".item-list-wrap .categories").val(),i=e(".item-list-wrap .keyword").val();e(".item-list-wrap .load-more").text("Load more"),e(".item-list-wrap ul").html('<li class="button loading updating-message">Loading</li>'),e.ajax({type:"POST",context:this,url:wpblockhub_ajax.wpblockhub_ajaxurl,data:{action:"wpblockhub_ajax_fetch_blockdata",wpblockhub_ajax_nonce:wpblockhub_ajax.ajax_nonce,categories:t,keyword:i},success:function(t){var i=JSON.parse(t);for(item in wpblockhub_posts=i.data.posts,html="",wpblockhub_posts)if(itemData=wpblockhub_posts[item],plugins_required=wpblockhub_posts[item].plugins_required,post_id=itemData.post_id,thumb=itemData.thumb,title=itemData.title,thumb){if(html+='<li class="item">',html+='<span class="item-import button" postid="'+post_id+'">Import</span>',html+='<img width="300px" src="'+thumb+'" />',html+='<div class="plugins-required">',"string"==typeof plugins_required)html+='<div class="">No 3rd party plugins required.</div>';else for(pluginData in html+='<div class="">Plugins required:</div>',plugins_required)plugin_zip_url=plugins_required[pluginData].plugin_zip_url,plugin_name=plugins_required[pluginData].name,html+='<div class="plugins-item">',html+='<a href="'+plugin_zip_url+'">'+plugin_name+"</a>",html+="</div>";html+="</div>",html+="<hr>",html+="</li>"}e(".item-list-wrap ul").html(html),e(".item-list-wrap .load-more").attr("paged",2)}})}),e(document).on("keyup",".item-list-wrap .keyword",function(){var t=e(".item-list-wrap .categories").val(),i=e(".item-list-wrap .keyword").val();e(".item-list-wrap .load-more").text("Load more"),s(function(){e(".item-list-wrap ul").html('<li class="button loading updating-message">Loading</li>'),e.ajax({type:"POST",context:this,url:wpblockhub_ajax.wpblockhub_ajaxurl,data:{action:"wpblockhub_ajax_fetch_blockdata",wpblockhub_ajax_nonce:wpblockhub_ajax.ajax_nonce,categories:t,keyword:i},success:function(t){var i=JSON.parse(t);for(item in wpblockhub_posts=i.data.posts,html="",wpblockhub_posts)if(itemData=wpblockhub_posts[item],plugins_required=wpblockhub_posts[item].plugins_required,post_id=itemData.post_id,thumb=itemData.thumb,title=itemData.title,thumb){if(html+='<li class="item">',html+='<span class="item-import button" postid="'+post_id+'">Import</span>',html+='<img width="300px" src="'+thumb+'" />',html+='<div class="plugins-required">',"string"==typeof plugins_required)html+='<div class="">No 3rd party plugins required.</div>';else for(pluginData in html+='<div class="">Plugins required:</div>',plugins_required)plugin_zip_url=plugins_required[pluginData].plugin_zip_url,plugin_name=plugins_required[pluginData].name,html+='<div class="plugins-item">',html+='<a href="'+plugin_zip_url+'">'+plugin_name+"</a>",html+="</div>";html+="</div>",html+="<hr>",html+="</li>"}e(".item-list-wrap ul").html(html),e(".item-list-wrap .load-more").attr("paged",2)}})},1e3)}),e(document).on("click",".item-list-wrap .load-more",function(){var t=e(".item-list-wrap .categories").val(),i=e(".item-list-wrap .keyword").val(),a=parseInt(e(this).attr("paged"));e(this).addClass("updating-message"),e.ajax({type:"POST",context:this,url:wpblockhub_ajax.wpblockhub_ajaxurl,data:{action:"wpblockhub_ajax_fetch_blockdata",wpblockhub_ajax_nonce:wpblockhub_ajax.ajax_nonce,categories:t,keyword:i,paged:a},success:function(t){var i=JSON.parse(t);for(item in wpblockhub_posts=i.data.posts,html="",wpblockhub_posts)if(itemData=wpblockhub_posts[item],plugins_required=wpblockhub_posts[item].plugins_required,post_id=itemData.post_id,thumb=itemData.thumb,title=itemData.title,thumb){if(html+='<li class="item">',html+='<span class="item-import button" postid="'+post_id+'">Import</span>',html+='<img width="300px" src="'+thumb+'" />',html+='<div class="plugins-required">',"string"==typeof plugins_required)html+='<div class="">No 3rd party plugins required.</div>';else for(pluginData in html+='<div class="">Plugins required:</div>',plugins_required)plugin_zip_url=plugins_required[pluginData].plugin_zip_url,plugin_name=plugins_required[pluginData].name,html+='<div class="plugins-item">',html+='<a href="'+plugin_zip_url+'">'+plugin_name+"</a>",html+="</div>";html+="</div>",html+="<hr>",html+="</li>"}e(".item-list-wrap ul").append(html),"undefined"!=typeof wpblockhub_posts?e(this).attr("paged",a+1):e(this).text("No more post"),e(this).removeClass("updating-message")}})}),e(document).on("click",".item-list-wrap .item .item-import",function(){post_id=e(this).attr("postid"),e(this).addClass("updating-message"),e.ajax({type:"POST",context:this,url:wpblockhub_ajax.wpblockhub_ajaxurl,data:{action:"wpblockhub_ajax_fetch_block_hub_by_id",wpblockhub_ajax_nonce:wpblockhub_ajax.ajax_nonce,post_id:post_id},success:function(t){var i=JSON.parse(t);post_content=i.post_content,post_content&&(wp_data=wp.data,wp_dispatch=wp_data.dispatch,wp_editor=wp_dispatch("core/editor"),wp_insertBlocks=wp_editor.insertBlocks,wp_insertBlocks(wp.blocks.parse(post_content))),e(this).removeClass("updating-message")}})})});